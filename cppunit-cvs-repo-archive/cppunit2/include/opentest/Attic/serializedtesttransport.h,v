head	1.5;
access;
symbols;
locks; strict;
comment	@ * @;


1.5
date	2006.09.01.19.27.59;	author blep;	state dead;
branches;
next	1.4;

1.4
date	2006.03.07.23.02.55;	author blep;	state Exp;
branches;
next	1.3;

1.3
date	2006.03.06.21.14.21;	author blep;	state dead;
branches;
next	1.2;

1.2
date	2006.03.06.08.40.48;	author blep;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.06.07.43.48;	author blep;	state Exp;
branches;
next	;


desc
@@


1.5
log
@- opentest library has been moved to its own project: http://www.sf.net/projects/opentest/
@
text
@#ifndef OPENTEST_SERIALIZEDTESTTRANSPORT_H_INCLUDED
# define OPENTEST_SERIALIZEDTESTTRANSPORT_H_INCLUDED

// for unit testing.

# include <opentest/forwards.h>
# include <opentest/remoteinterfaces.h>
# include <deque>


namespace OpenTest {


class SerializedTestTransport : public MessageTransport
{
public: // overriden from MessageTransport
   void sendMessage( const RemoteMessagePtr &message );

   void dispatchReceivedMessages( RemoteMessageServer &server );

private:
   typedef std::deque<RemoteMessagePtr> Messages;
   Messages messages_;
};



inline void
SerializedTestTransport::sendMessage( const RemoteMessagePtr &message )
{
   messages_.push_back( message );
}



inline void 
SerializedTestTransport::dispatchReceivedMessages( RemoteMessageServer &server )
{
   Messages toDispatch;
   toDispatch.swap( messages_ );
   while ( !toDispatch.empty() )
   {
      server.dispatchMessage( toDispatch.front() );
      toDispatch.pop_front();
   }
}


} // namespace OpenTest

#endif // OPENTEST_SERIALIZEDTESTTRANSPORT_H_INCLUDED

@


1.4
log
@* added end to end test for shared memory transport.
@
text
@@


1.3
log
@* removed dead-code
@
text
@d4 1
a4 4

/*  Unused code, need to be updated to work with connector.h...
 */

a50 1

@


1.2
log
@* dead-code removal, obsolescence annotiation
@
text
@@


1.1
log
@* tests for remote Interfaces implementation in opentest
@
text
@d4 5
@

